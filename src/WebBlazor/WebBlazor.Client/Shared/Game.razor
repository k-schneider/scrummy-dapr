@inherits FluxorComponent
@implements IDisposable
@inject IDispatcher Dispatcher
@inject IState<GameState> GameState

<PageTitle>Scrummy - Playing</PageTitle>

<div>The actual Game</div>
<button @onclick="LeaveRoom">Leave Room</button>

@code {
    [Parameter]
    public string GameId { get; set; } = null!;

    protected override async Task OnInitializedAsync()
    {
        Dispatcher.Dispatch(new ConnectToGameAction(GameId));
        await base.OnInitializedAsync();
    }

    private void LeaveRoom()
    {
        Dispatcher.Dispatch(new LeaveRoomAction(GameId));
    }

    void IDisposable.Dispose()
    {
        Dispatcher.Dispatch(new DisconnectFromGameAction());
    }
}
